{"version":3,"sources":["reportWebVitals.js","components/Home.js","components/Login.js","components/ResetPassword.js","components/VideoChat.js","components/Room.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Home","Login","navigate","useNavigate","useState","email","setEmail","password","setPassword","username","setUsername","error","setError","useEffect","token","localStorage","getItem","axios","post","header","res","catch","console","log","data","loginHandler","e","a","preventDefault","config","setItem","state","response","setTimeout","registerHandler","Helmet","charset","content","name","rel","href","src","crossorigin","className","action","onSubmit","type","placeholder","required","value","onChange","target","id","onClick","document","querySelector","classList","add","alt","remove","ResetPassword","socket","io","reconnect","rejectUnauthorized","VideoChat","roomId","setRoomId","useRef","current","useLocation","base64","split","replace","payload","JSON","parse","window","atob","user","on","err","alert","emit","roomID","joined","Room","message","setMessage","chats","setChats","useParams","messageRef","peers","setPeers","socketRef","userVideo","peersRef","styled","video","addEventListener","event","currentTarget","scroll","top","scrollHeight","behavior","videoConstraints","height","innerHeight","width","innerWidth","navigator","mediaDevices","getUserMedia","audio","stream","srcObject","users","forEach","userID","peer","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","push","peerID","incomingSignal","addPeer","find","p","recieveMessage","usr","person_id","time","Date","now","classType","newUser","muted","ref","autoPlay","playsInline","map","index","chat","ReactDOM","render","path","element","getElementById"],"mappings":"mMAYeA,G,MAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,Q,sBCGCQ,MARf,WACE,OACE,sD,iECyOWC,MAtOf,WACI,IAAMC,EAAWC,cACjB,EAAyBC,mBAAS,IAAlC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA8BF,mBAAS,IAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KACA,EAA+BJ,mBAAS,IAAxC,mBAAOK,EAAP,KAAgBC,EAAhB,KACA,EAAyBN,mBAAS,IAAlC,mBAAOO,EAAP,KAAaC,EAAb,KAIAC,qBAAU,WAIM,IAAMC,EAAQC,aAAaC,QAAQ,aAQnC,EAAcC,IAAMC,KAAK,sBAAsB,CAACJ,SALlC,CACNK,OAAO,CACH,eAAe,sBAGoCzB,MAAK,SAAC0B,GAE7DlB,EAAS,kBAEdmB,OAAM,SAACV,GACFW,QAAQC,IAAIZ,GACZT,EAAS,aANjB,EAAOsB,OAarB,CAACtB,IAeH,IAAMuB,EAAY,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,6DAEjBD,EAAEE,iBACIC,EAAQ,CACVV,OAAO,CACH,eAAe,qBALN,kBASQF,IAAMC,KAAK,cAAc,CAACb,QAAME,WAASE,YAAUoB,GAT3D,gBASNL,EATM,EASNA,KACPF,QAAQC,IAAI,OAAOC,GAEnBT,aAAae,QAAQ,YAAYN,EAAKV,OACtCZ,EAAS,cAAc,CAAC6B,MAAMtB,IAbjB,kDAoBZa,QAAQC,IAAI,KAAMS,SAASR,KAAKb,OACjCC,EAAS,KAAMoB,SAASR,KAAKb,OAC7BsB,YAAW,WAAKrB,EAAS,MACvB,KAvBW,0DAAH,sDA8BXsB,EAAe,uCAAC,WAAMR,GAAN,mBAAAC,EAAA,6DACnBD,EAAEE,iBACIC,EAAQ,CACVV,OAAO,CACH,eAAe,qBAJJ,kBAQMF,IAAMC,KAAK,iBAAiB,CAACT,WAASF,WAASF,SAAOwB,GAR5D,gBAQRL,EARQ,EAQRA,KACHF,QAAQC,IAAI,OAAOC,GAEnBT,aAAae,QAAQ,YAAYN,EAAKV,OACtCZ,EAAS,cAAc,CAAC6B,MAAMtB,IAZnB,kDAiBfG,EAAS,KAAMoB,SAASR,KAAKb,OAC7BsB,YAAW,WAAKrB,EAAS,MACvB,KAnBa,0DAAD,sDAwBtB,OAEI,gCAEI,eAACuB,EAAA,EAAD,WACI,sBAAMC,QAAQ,UACd,sBAAM,aAAW,kBAAkBC,QAAQ,YAC3C,sBAAMC,KAAK,WAAWD,QAAQ,0CAC9B,2DACA,sBAAME,IAAI,aAAaC,KAAK,8BAC5B,sBAAMA,KAAK,iGAAiGD,IAAI,eAChH,wBAAQE,IAAI,4CAA4CC,YAAY,iBAExE,sBAAKC,UAAU,YAAf,UAEI,qBAAKA,UAAU,mBAAf,SACI,sBAAKA,UAAU,OAAf,UACI,uBAAMC,OAAO,GAAGD,UAAU,gBAAgBE,SAAUpB,EAApD,UACI,oBAAIkB,UAAU,cAAd,qBACChC,GAAS,+BAAOA,IACjB,sBAAKgC,UAAU,oBAAf,UACI,mBAAGA,UAAU,gBACb,uBAAOG,KAAK,OAAOC,YAAY,WAAWC,UAAQ,EAACV,KAAK,WAAWW,MAAOxC,EAAUyC,SAAU,SAACxB,GAC3FhB,EAAYgB,EAAEyB,OAAOF,aAG7B,sBAAKN,UAAU,oBAAf,UACI,mBAAGA,UAAU,gBACb,uBAAOG,KAAK,WAAWC,YAAY,WAAWC,UAAQ,EAACV,KAAK,WAAWW,MAAQ1C,EAAU2C,SAAU,SAACxB,GAChGlB,EAAYkB,EAAEyB,OAAOF,aAG7B,uBAAON,UAAU,eAAeG,KAAK,SAASG,MAAM,UACpD,mBAAGN,UAAU,oBAAb,8CACA,sBAAKA,UAAU,qBAAf,UACI,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,wBAEjB,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,qBAEjB,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,oBAEjB,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,+BAKzB,uBAAME,SAAUX,EAAiBS,UAAU,gBAA3C,UACI,oBAAIA,UAAU,cAAd,qBACChC,GAAS,+BAAOA,IACjB,sBAAKgC,UAAU,oBAAf,UACI,mBAAGA,UAAU,gBACb,uBAAOG,KAAK,OAAOC,YAAY,WAAWC,UAAQ,EAACV,KAAK,WAAWW,MAAOxC,EAAUyC,SAAU,SAACxB,GAC3FhB,EAAYgB,EAAEyB,OAAOF,aAG7B,sBAAKN,UAAU,oBAAf,UACI,mBAAGA,UAAU,oBACb,uBAAOG,KAAK,OAAOC,YAAY,QAAQC,UAAQ,EAACV,KAAK,QAAQW,MAAO5C,EAAO6C,SAAU,SAACxB,GAClFpB,EAASoB,EAAEyB,OAAOF,aAG1B,sBAAKN,UAAU,oBAAf,UACI,mBAAGA,UAAU,gBACb,uBAAOG,KAAK,WAAWC,YAAY,WAAWC,UAAQ,EAACV,KAAK,WAAWW,MAAO1C,EAAU2C,SAAU,SAACxB,GAC/FlB,EAAYkB,EAAEyB,OAAOF,aAI7B,uBAAON,UAAU,eAAeG,KAAK,SAASG,MAAM,YAEpD,mBAAGN,UAAU,oBAAb,8CACA,sBAAKA,UAAU,qBAAf,UACI,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,wBAEjB,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,qBAEjB,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,oBAEjB,mBAAGH,KAAK,IAAIG,UAAU,qBAAtB,SACI,mBAAGA,UAAU,oCAMjC,sBAAKA,UAAU,oBAAf,UACI,sBAAKA,UAAU,oBAAf,UACI,sBAAKA,UAAU,iBAAf,UACI,oBAAIA,UAAU,eAAd,wBACA,mBAAGA,UAAU,mBAAb,2GAIA,wBAAQA,UAAU,sBAAsBS,GAAG,cAAcC,QAjKjF,WAGsBC,SAASC,cAAc,cAC/BC,UAAUC,IAAI,iBA6JJ,wBAIJ,qBAAKd,UAAU,eAAeF,IAAI,6EAA6EiB,IAAI,QAEvH,sBAAKf,UAAU,qBAAf,UACI,sBAAKA,UAAU,iBAAf,UACI,oBAAIA,UAAU,eAAd,yBACA,mBAAGA,UAAU,mBAAb,2GAIA,wBAAQA,UAAU,sBAAsBS,GAAG,cAAcC,QApLjF,WACsBC,SAASC,cAAc,cAE/BC,UAAUG,OAAO,iBAiLP,wBAIJ,qBAAKhB,UAAU,eAAeF,IAAI,wEAAwEiB,IAAI,kBCzNvHE,MARf,WACI,OACI,+D,QCGKC,EAASC,YAAG,0CAA0C,CAElEC,WAAW,EAAMC,oBAAqB,IA4FxBC,I,EAAAA,EApFf,WACI,MAA0B7D,mBAAS,IAAnC,mBAAO8D,EAAP,KAAcC,EAAd,KACMjE,EAAUC,cAGVM,EAAU2D,mBAwDhB,OAvDA3D,EAAS4D,QAAUC,cAAcvC,MACjClB,qBAAU,WACFE,aAAaC,QAAQ,cACrBd,EAAS,SAAS,CAACO,SAAS,4BAEhC,IAAMK,EAAQC,aAAaC,QAAQ,aAQ/BC,IAAMC,KAAK,sBAAsB,CAACJ,SALpB,CACVK,OAAO,CACH,eAAe,sBAG0BzB,MAAK,SAAC0B,GACnD,IACMmD,EADWzD,EAAM0D,MAAM,KAAK,GACTC,QAAQ,IAAI,KAAKA,QAAQ,IAAI,KAChDC,EAAUC,KAAKC,MAAMC,OAAOC,KAAKP,IACvC9D,EAAS4D,QAAUK,EAAQK,KAC3BlB,EAAOmB,GAAG,WAAU,WAEhB1D,QAAQC,IAAI,6BAA6BsC,EAAOT,IAChD9B,QAAQC,IAAId,EAAS4D,eAI1BhD,OAAM,SAACV,GACNT,EAAS,gBA0BrB2D,EAAOmB,GAAG,iBAAgB,SAACC,OAIvB,gCAGI,wBAAQnC,KAAK,SAASO,QA1BL,WACrB6B,MAAM,kBACNrB,EAAOsB,KAAK,eAAc,SAAAC,GAEtBlF,EAAS,SAAD,OAAUkF,GAAS,CAACrD,MAAM,CAACsD,OAAO,OAAO5E,SAASA,EAAS4D,eAsBnE,yBAEA,uBAAMxB,SAnBU,SAACnB,GACrBA,EAAEE,iBAEFiC,EAAOsB,KAAK,YAAYjB,EAAOzD,EAAS4D,SAAQ,SAACH,GAC7C5C,QAAQC,IAAI,eAAe2C,EAAOzD,EAAS4D,SAC3CnE,EAAS,SAAD,OAAUgE,GAAS,CAACnC,MAAM,CAACsD,OAAO,OAAO5E,SAASA,EAAS4D,eAcnE,UACI,uBAAOvB,KAAK,OAAOC,YAAY,WAAWE,MAAOiB,EAAQhB,SAAU,SAACxB,GAChEyC,EAAUzC,EAAEyB,OAAOF,UAEvB,wBAAQH,KAAK,SAAb,0BAKJ,wBAAQA,KAAK,SAASR,KAAK,QAAQe,QAAS,WACxCtC,aAAae,QAAQ,YAAY,IACjC5B,EAAS,WAFb,wB,kDC8KGoF,MAnQf,WAGE,IAAMpF,EAAWC,cAEjB,EAA8BC,mBAAS,IAAvC,mBAAOmF,EAAP,KAAgBC,EAAhB,KACA,EAA0BpF,mBAAS,IAAnC,mBAAOqF,EAAP,KAAcC,EAAd,KACQN,EAAWO,cAAXP,OACFQ,EAAaxB,mBACb3D,EAAW2D,mBACTrC,EAAUuC,cAAVvC,MAGR,EAA0B3B,mBAAS,IAAnC,mBAAOyF,EAAP,KAAcC,EAAd,KACMC,EAAY3B,mBACZ4B,EAAY5B,mBACZ6B,EAAW7B,iBAAO,IAEJ8B,IAAOC,MAAV,+DAwBjBtF,qBAAU,WACJ+E,GACFA,EAAWvB,QAAQ+B,iBAAiB,mBAAmB,SAAAC,GACrD,IAAuBlD,EAAWkD,EAA1BC,cACRnD,EAAOoD,OAAO,CAAEC,IAAKrD,EAAOsD,aAAcC,SAAU,gBAIvD,IAGH,IAAMC,EAAmB,CACvBC,OAAQ/B,OAAOgC,YAAc,EAC7BC,MAAOjC,OAAOkC,WAAa,GAI7BlG,qBAAU,WACRkF,EAAU1B,QAAUR,EACpBmD,UAAUC,aAAaC,aAAa,CAAEf,MAAOQ,EAAkBQ,OAAO,IAAQzH,MAAK,SAAA0H,GACjFpB,EAAU3B,QAAQgD,UAAUD,EAC5BrB,EAAU1B,QAAQc,KAAK,aACvBY,EAAU1B,QAAQW,GAAG,aAAY,SAAAsC,GAC/BhG,QAAQC,IAAI,wBACZ,IAAMsE,EAAO,GACbyB,EAAMC,SAAQ,SAAAC,GACZ,IAAMC,EA4BhB,SAAoBC,EAAcC,EAAUP,GAC1C,IAAMK,EAAO,IAAIG,IAAK,CACpBC,WAAU,EACVC,SAAQ,EACRV,WAKF,OAHAK,EAAKzC,GAAG,UAAU,SAAA+C,GAChBhC,EAAU1B,QAAQc,KAAK,iBAAiB,CAACuC,eAAaC,WAASI,cAE1DN,EArCcO,CAAWR,EAAOzB,EAAU1B,QAAQjB,GAAGgE,GACpDnB,EAAS5B,QAAQ4D,KAAK,CACpBC,OAAOV,EACPC,SAEF5B,EAAMoC,KAAKR,MAGbnG,QAAQC,IAAI,UAAUsE,GACtBC,EAASD,MAEXE,EAAU1B,QAAQW,GAAG,eAAc,SAAAN,GACjCpD,QAAQC,IAAI,uCACZ,IAAMkG,EA4Bd,SAAiBU,EAAgBR,EAAUP,GACrC,IAAMK,EAAM,IAAIG,IAAK,CACnBC,WAAU,EACVC,SAAQ,EACRV,WAQF,OANAK,EAAKzC,GAAG,UAAS,SAAA+C,GACfhC,EAAU1B,QAAQc,KAAK,mBAAmB,CAAC4C,SAAOJ,gBAGpDF,EAAKM,OAAOI,GAELV,EAxCQW,CAAQ1D,EAAQqD,OAAOrD,EAAQiD,SAASP,GACrDnB,EAAS5B,QAAQ4D,KAAK,CACpBC,OAAOxD,EAAQiD,SACfF,SAEF3B,GAAS,SAAAwB,GAAK,4BAAMA,GAAN,CAAYG,UAE5B1B,EAAU1B,QAAQW,GAAG,6BAA6B,SAAAN,GACnCuB,EAAS5B,QAAQgE,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,SAAWxD,EAAQtB,MACxDqE,KAAKM,OAAOrD,EAAQqD,gBAG9B,IA8CDlH,qBAAU,WACR,IAAMC,EAAQC,aAAaC,QAAQ,aAOnCC,IACGC,KAAK,sBAAuB,CAAEJ,SANlB,CACbK,OAAQ,CACN,eAAgB,sBAKjBzB,MAAK,SAAA0B,GACJ,IACMmD,EADYzD,EAAM0D,MAAM,KAAK,GACVC,QAAQ,IAAK,KAAKA,QAAQ,IAAK,KAClDC,EAAUC,KAAKC,MAAMC,OAAOC,KAAKP,IACvC9D,EAAS4D,QAAUK,EAAQK,KAE3BzD,QAAQC,KAAKQ,GACRA,EAKHwG,EAAe,WAAD,OAAYxG,EAAMtB,SAAlB,iBAA2C,KAJzDa,QAAQC,IAAIQ,GAEZ7B,EAAS,mBAKZmB,OAAM,SAAAV,GACLW,QAAQC,IAAIZ,GACZT,EAAS,eAEZ,CAACA,EAAU6B,IACd,IAgBMwG,EAAiB,SAAChD,EAAS9E,GAC/B,IAAK+H,EAAI/H,EAET+H,EADc,KAAX/H,EACC,GAEAA,EAAS,IACbiF,EAAS,GAAD,mBACHD,GADG,CAEN,CACEF,QAASA,EACTkD,UAAWD,EACXE,KAAMC,KAAKC,MACXC,UAAW,aAiBjB,OAbAhF,EAAOmB,GAAG,mBAAmB,SAACO,EAAS9E,GAErC8H,EAAehD,EAAS9E,MAE1BoD,EAAOmB,GAAG,UAAU,YAAkB,IAAf8D,EAAc,EAAdA,QACrBxH,QAAQC,IAAI,eAAgBuH,GAE5BP,EAAe,GAAD,OAAIO,EAAJ,oBAA+B,OAO7C,sBAAKnG,UAAU,iBAAf,UACE,sBAAKA,UAAU,aAAf,UACA,uBAAOoG,OAAK,EAACC,IAAKhD,EAAWiD,UAAQ,EAACC,aAAW,IAEhDrD,EAAMsD,KAAI,SAAC1B,EAAM2B,GACR,OACI,uBAAmB3B,KAAMA,EAAMyB,aAAW,EAACD,UAAQ,GAAvCG,MAIxB,qBAAKzG,UAAU,gBAIjB,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,UAAUqG,IAAKpD,EAA9B,SACGH,EAAM0D,KAAI,SAAAE,GACT,OACE,oBAAmB1G,UAAW0G,EAAKR,UAAnC,UACGQ,EAAKZ,UACLY,EAAK9D,UAFA8D,EAAKX,WAOnB,sBAAK/F,UAAU,UAAf,UACE,uBACEG,KAAK,OACLR,KAAK,UACLc,GAAG,cACHH,MAAOsC,EACPrC,SAAU,SAAAxB,GACR8D,EAAW9D,EAAEyB,OAAOF,UAGxB,wBAAQG,GAAG,OAAOC,QAjFC,WAEzBqC,EAAS,GAAD,mBACHD,GADG,CAEN,CACEF,QAASA,EACTkD,UAAWhI,EAAS4D,QAAQ,IAC5BqE,KAAMC,KAAKC,MACXC,UAAW,SAIfhF,EAAOsB,KAAK,eAAgBI,EAASH,EAAQ3E,EAAS4D,SAEtDmB,EAAW,KAmEL,4BChPV8D,IAASC,OACP,cAAC,IAAD,UAGE,eAAC,IAAD,WAEE,cAAC,IAAD,CAAOC,KAAM,IAAIC,QAAS,cAAC,EAAD,MAE1B,cAAC,IAAD,CAAOD,KAAM,SAASC,QAAS,cAAC,EAAD,MAE/B,cAAC,IAAD,CAAOD,KAAM,kBAAkBC,QAAS,cAAC,EAAD,MACxC,cAAC,IAAD,CAAOD,KAAM,cAAcC,QAAS,cAAC,EAAD,MACpC,cAAC,IAAD,CAAOD,KAAK,gBAAgBC,QAAW,cAAC,EAAD,WAG3CnG,SAASoG,eAAe,SAM1BnK,K","file":"static/js/main.b9fdf8b9.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\n\nfunction Home() {\n  return (\n    <div>\n      this  a home route\n    </div>\n  )\n}\n\nexport default Home\n","import React from 'react'\nimport './Login.css'\nimport { Helmet } from 'react-helmet'\nimport { useState, useEffect } from 'react'\nimport { useNavigate,useLocation} from 'react-router-dom'\nimport axios from 'axios'\n// import validateToken from '../utils/validateToken';\nfunction Login() {\n    const navigate = useNavigate();\n    const [email,setEmail] = useState(\"\");\n    const [password,setPassword]= useState(\"\");\n    const [username,setUsername] = useState(\"\");\n    const [error,setError] = useState(\"\");\n\n\n\n    useEffect(()=>{\n        \n            \n                    \n                    const token = localStorage.getItem(\"authToken\");\n                    \n                    \n                    const config ={\n                            header:{\n                                'Content-type':\"application/json\"\n                            }\n                        }\n                    const {data} =axios.post('/auth/validateToken',{token},config).then((res)=>{\n                    \n                            navigate('/video-chat');\n                        \n                    }).catch((error)=>{\n                            console.log(error);\n                            navigate(\"/login\");\n                    \n                    })\n                \n                    \n\n\n    },[navigate]);\n\n    function signInHandler() {\n        const container = document.querySelector(\".container\");\n       \n        container.classList.remove(\"sign-up-mode\");\n\n    }\n    function signUpHandler() {\n\n\n        const container = document.querySelector(\".container\");\n        container.classList.add(\"sign-up-mode\");\n\n    }\n    const loginHandler = async (e) => {\n        // alert(\"this is called\");\n        e.preventDefault();\n        const config ={\n            header:{\n                'Content-type':\"application/json\"\n            }\n        }\n        try {\n            const {data} = await axios.post('/auth/login',{email,password,username},config);\n            console.log(\"data\",data);\n            \n            localStorage.setItem(\"authToken\",data.token);\n            navigate('/video-chat',{state:username});\n            \n            \n\n            \n\n        } catch (error) {\n             console.log(error.response.data.error);\n            setError(error.response.data.error);\n            setTimeout(()=>{setError(\"\")\n            },5000);\n           \n            \n        }\n\n\n    }\n     const registerHandler=async(e)=>{\n        e.preventDefault();\n        const config ={\n            header:{\n                'Content-type':\"application/json\"\n            }\n        }\n        try{\n            const {data} = await axios.post('/auth/register',{username,password,email},config);\n                console.log(\"data\",data);\n            \n                localStorage.setItem('authToken',data.token);\n                navigate('/video-chat',{state:username});\n            \n           \n            \n        } catch (error) {\n            setError(error.response.data.error);\n            setTimeout(()=>{setError(\"\")\n            },5000);\n            \n        }\n\n    }\n    return (\n\n        <div>\n\n            <Helmet>\n                <meta charset=\"UTF-8\" />\n                <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n                <title>Sign In & Sign Up Form</title>\n                <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" />\n                <link href=\"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700;800&display=swap\" rel=\"stylesheet\" />\n                <script src=\"https://kit.fontawesome.com/1788c719dd.js\" crossorigin=\"anonymous\"></script>\n            </Helmet>\n            <div className=\"container\">\n            \n                <div className=\"container__forms\">\n                    <div className=\"form\" >\n                        <form action=\"\" className=\"form__sign-in\" onSubmit={loginHandler}>\n                            <h2 className=\"form__title\">Sign In</h2>\n                            {error && <span>{error}</span>}\n                            <div className=\"form__input-field\">\n                                <i className=\"fas fa-user\"></i>\n                                <input type=\"text\" placeholder=\"Username\" required name=\"username\" value={username} onChange={(e)=>{\n                                    setUsername(e.target.value);\n                                }}/>\n                            </div>\n                            <div className=\"form__input-field\">\n                                <i className=\"fas fa-lock\"></i>\n                                <input type=\"password\" placeholder=\"Password\" required name=\"password\" value ={password} onChange={(e)=>{\n                                    setPassword(e.target.value);\n                                }}/>\n                            </div>\n                            <input className=\"form__submit\" type=\"submit\" value=\"Login\" />\n                            <p className=\"form__social-text\">Or Sign in with social platforms</p>\n                            <div className=\"form__social-media\">\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-facebook-f\"></i>\n                                </a>\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-twitter\"></i>\n                                </a>\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-google\"></i>\n                                </a>\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-linkedin-in\"></i>\n                                </a>\n                            </div>\n                        </form>\n\n                        <form onSubmit={registerHandler} className=\"form__sign-up\">\n                            <h2 className=\"form__title\">Sign Up</h2>\n                            {error && <span>{error}</span>}\n                            <div className=\"form__input-field\">\n                                <i className=\"fas fa-user\"></i>\n                                <input type=\"text\" placeholder=\"Username\" required name=\"username\" value={username} onChange={(e)=>{\n                                    setUsername(e.target.value);\n                                }}/>\n                            </div>\n                            <div className=\"form__input-field\">\n                                <i className=\"fas fa-envelope\"></i>\n                                <input type=\"text\" placeholder=\"Email\" required name=\"email\" value={email} onChange={(e)=>{\n                                    setEmail(e.target.value);\n                                }}/>\n                            </div>\n                            <div className=\"form__input-field\">\n                                <i className=\"fas fa-lock\"></i>\n                                <input type=\"password\" placeholder=\"Password\" required name=\"password\" value={password} onChange={(e)=>{\n                                    setPassword(e.target.value);\n                                }}/>\n                            </div>\n\n                            <input className=\"form__submit\" type=\"submit\" value=\"Sign Up\" />\n\n                            <p className=\"form__social-text\">Or Sign up with social platforms</p>\n                            <div className=\"form__social-media\">\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-facebook-f\"></i>\n                                </a>\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-twitter\"></i>\n                                </a>\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-google\"></i>\n                                </a>\n                                <a href=\"/\" className=\"form__social-icons\">\n                                    <i className=\"fab fa-linkedin-in\"></i>\n                                </a>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n                <div className=\"container__panels\">\n                    <div className=\"panel panel__left\">\n                        <div className=\"panel__content\">\n                            <h3 className=\"panel__title\">New here ?</h3>\n                            <p className=\"panel__paragraph\">\n                                Lorem ipsum dolor sit amet consectetur adipisicing elit.\n                                Doloremque adipisci tempore aliquid?\n              </p>\n                            <button className=\"btn btn-transparent\" id=\"sign-up-btn\" onClick={signUpHandler}>\n                                Sign Up\n              </button>\n                        </div>\n                        <img className=\"panel__image\" src=\"https://stories.freepiklabs.com/storage/11588/market-launch-amico-2628.png\" alt=\"\" />\n                    </div>\n                    <div className=\"panel panel__right\">\n                        <div className=\"panel__content\">\n                            <h3 className=\"panel__title\">One of us ?</h3>\n                            <p className=\"panel__paragraph\">\n                                Lorem ipsum dolor sit amet consectetur adipisicing elit.\n                                Doloremque adipisci tempore aliquid?\n              </p>\n                            <button className=\"btn btn-transparent\" id=\"sign-in-btn\" onClick={signInHandler}>\n                                Sign In\n              </button>\n                        </div>\n                        <img className=\"panel__image\" src=\"https://www.pngkey.com/png/full/444-4444270_ia-press-play-website.png\" alt=\"\" />\n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n    )\n}\n\nexport default Login;","import React from 'react'\n\nfunction ResetPassword() {\n    return (\n        <div>\n            this is resetpassword route\n        </div>\n    )\n}\n\nexport default ResetPassword\n","import React from 'react'\nimport {useEffect,useState,useRef} from 'react';\nimport {useNavigate,useLocation} from 'react-router-dom';\nimport io from 'socket.io-client';\nimport axios from 'axios';\n\nimport '../'\nexport const socket = io(' https://peer-wrtc-video.herokuapp.com/',{\n   \n reconnect: true, rejectUnauthorized : false,});\n\n\n\n\n\n\n\nfunction VideoChat() {\n    const [roomId,setRoomId] =useState(\"\");\n    const navigate= useNavigate();\n    \n    // console.log(username);\n    const username =useRef();\n    username.current = useLocation().state;\n    useEffect(()=>{\n        if(!localStorage.getItem('authToken')){\n            navigate(\"/login\",{username:\"plese login to continue\"});\n        }\n        const token = localStorage.getItem('authToken');\n       \n       \n            const config ={\n                header:{\n                    'Content-type':\"application/json\"\n                }\n            }\n            axios.post('/auth/validateToken',{token},config).then((res)=>{\n                const base64Url= token.split('.')[1];\n                const base64 = base64Url.replace('-','+').replace('_','/');\n                const payload = JSON.parse(window.atob(base64));\n                username.current = payload.user;\n                socket.on('connect',()=>{\n  \n                    console.log('you are connected with id ',socket.id)\n                    console.log(username.current);\n                    // socket.emit('register',username.current);\n                    });\n            \n            }).catch((error)=>{\n                navigate(\"/login\");\n        \n            })\n    \n    });\n\n\n    const creatRoomHandler = ()=>{\n        alert('button clicked');\n        socket.emit('create-room',roomID=>{\n\n            navigate(`/room/${roomID}`,{state:{joined:\"true\",username:username.current}});\n        });\n\n\n    }\n    const joinRoomHandler = (e)=>{\n        e.preventDefault();\n        let video = true;\n        socket.emit('join-room',roomId,username.current,(roomId)=>{\n            console.log('joined room ',roomId,username.current)\n            navigate(`/room/${roomId}`,{state:{joined:\"true\",username:username.current}});\n        });\n        \n\n    }\n    socket.on('connect_error',(err)=>{\n        \n    })\n    return (\n        <div>\n\n            \n            <button type=\"button\" onClick={creatRoomHandler}>Create room</button>\n\n            <form onSubmit={joinRoomHandler}>\n                <input type=\"text\" placeholder=\"Rooom ID\" value={roomId} onChange={(e)=>{\n                    setRoomId(e.target.value)\n                }}/>\n                <button type=\"submit\">Join Room</button>\n            </form>\n\n\n\n            <button type=\"button\" name=\"login\" onClick={()=>{\n                localStorage.setItem('authToken',\"\");\n                navigate('/login');\n            }} >Logout</button>            \n        </div>)\n   \n}\n\nexport default VideoChat\n","import React from \"react\";\nimport \"./Room.css\";\nimport { socket } from \"../components/VideoChat\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nfunction Room() {\n  // console.log('stte:',state);\n  \n  const navigate = useNavigate();\n \n  const [message, setMessage] = useState(\"\");\n  const [chats, setChats] = useState([]);\n  const { roomID } = useParams();\n  const messageRef = useRef();\n  const username = useRef();\n  const { state } = useLocation();\n  \n\n  const [peers, setPeers] = useState([]);\n  const socketRef = useRef();\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  \n  const StyledVideo = styled.video`\n    height: 40%;\n    width: 50%;\n`;\n  const Video = (props) => {\n    const ref = useRef();\n    console.log(\"propps\",props);\n\n    useEffect(() => {\n        props.peer.on(\"stream\", stream => {\n            ref.current.srcObject = stream;\n        })\n    }, []);\n\n    return (\n        <StyledVideo playsInline autoPlay ref={ref} />\n    );\n}\n\n\n\n\n\n\n  useEffect(() => {\n    if (messageRef) {\n      messageRef.current.addEventListener(\"DOMNodeInserted\", event => {\n        const { currentTarget: target } = event;\n        target.scroll({ top: target.scrollHeight, behavior: \"smooth\" });\n      });\n    }\n    \n  }, []);\n\n\n  const videoConstraints = {\n    height: window.innerHeight / 2,\n    width: window.innerWidth / 2\n};\n\n\n  useEffect(() => {\n    socketRef.current = socket;\n    navigator.mediaDevices.getUserMedia({ video: videoConstraints, audio: true }).then(stream => {\n      userVideo.current.srcObject=stream;\n      socketRef.current.emit(\"join room\");\n      socketRef.current.on(\"all users\",users=>{\n        console.log('all users is called ')\n        const peers =[];\n        users.forEach(userID => {\n          const peer = createPeer(userID,socketRef.current.id,stream);\n          peersRef.current.push({\n            peerID:userID,\n            peer,\n          })\n          peers.push(peer);\n          \n        });\n        console.log('peersss',peers);\n        setPeers(peers);\n      })\n      socketRef.current.on('user joined',payload=>{\n        console.log('user joined is called with apthlod ')\n        const peer = addPeer(payload.signal,payload.callerID,stream);\n        peersRef.current.push({\n          peerID:payload.callerID,\n          peer,\n        })\n        setPeers(users=>[...users,peer]);\n      })\n      socketRef.current.on(\"receiving returned signal\", payload => {\n        const item = peersRef.current.find(p => p.peerID === payload.id);\n        item.peer.signal(payload.signal);\n    });\n    })\n}, []);\n\n\nfunction createPeer(userToSignal, callerID, stream) {\n  const peer = new Peer({\n    initiator:true,\n    trickle:false,\n    stream,\n  });\n  peer.on(\"signal\" ,signal=>{\n    socketRef.current.emit('sending signal',{userToSignal,callerID,signal});\n  });\n  return peer;\n  \n       \n}\nfunction addPeer(incomingSignal, callerID, stream) {\n      const peer =new Peer({\n        initiator:false,\n        trickle:false,\n        stream\n      });\n      peer.on(\"signal\",signal=>{\n        socketRef.current.emit('returning signal',{signal,callerID});\n\n      })\n      peer.signal(incomingSignal);\n      \n      return peer; \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"authToken\");\n\n    const config = {\n      header: {\n        \"Content-type\": \"application/json\"\n      }\n    };\n    axios\n      .post(\"/auth/validateToken\", { token }, config)\n      .then(res => {\n        const base64Url = token.split(\".\")[1];\n        const base64 = base64Url.replace(\"-\", \"+\").replace(\"_\", \"/\");\n        const payload = JSON.parse(window.atob(base64));\n        username.current = payload.user;\n        // console.log(state)\n        console.log(!state)\n        if (!state) {\n          console.log(state)\n          \n          navigate(\"/video-chat\");\n        } else {\n          recieveMessage(`Welcome ${state.username} to the room `, \"\");\n        }\n      })\n      .catch(error => {\n        console.log(error)\n        navigate(\"/login\");\n      });\n  }, [navigate, state]);\n  const sendMessageHandler = () => {\n    \n    setChats([\n      ...chats,\n      {\n        message: message,\n        person_id: username.current+\":\" ,\n        time: Date.now(),\n        classType: \"me\"\n      }\n    ]);\n\n    socket.emit(\"send-message\", message, roomID, username.current);\n\n    setMessage(\"\");\n  };\n  const recieveMessage = (message, username) => {\n    let  usr=username;\n    if(username===\"\")\n    usr=\"\";\n    else\n    usr=username+\":\";\n    setChats([\n      ...chats,\n      {\n        message: message,\n        person_id: usr,\n        time: Date.now(),\n        classType: \"other\"\n      }\n    ]);\n  };\n  socket.on(\"recieve-message\", (message, username) => {\n    //    alert(\"recieved\");\n    recieveMessage(message, username);\n  });\n  socket.on(\"joined\", ({ newUser }) => {\n    console.log(\"user joined \", newUser);\n   \n    recieveMessage(`${newUser} joined the chat`, \"\");\n  });\n  \n  \n\n \n  return (\n    <div className=\"container-room\">\n      <div className=\"video-card\">\n      <video muted ref={userVideo} autoPlay playsInline />\n\n      {peers.map((peer, index) => {\n                return (\n                    <video key={index} peer={peer} playsInline autoPlay/>\n                );\n            })}\n        \n        <div className=\"controls\">\n        \n        </div>\n      </div>\n      <div className=\"chat\">\n        <div className=\"content\" ref={messageRef}>\n          {chats.map(chat => {\n            return (\n              <p key={chat.time} className={chat.classType}>\n                {chat.person_id}\n                {chat.message}\n              </p>\n            );\n          })}\n        </div>\n        <div className=\"message\">\n          <input\n            type=\"text\"\n            name=\"message\"\n            id=\"input-field\"\n            value={message}\n            onChange={e => {\n              setMessage(e.target.value);\n            }}\n          />\n          <button id=\"send\" onClick={sendMessageHandler}>\n            send\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Room;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n// import App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter as Router,Routes, Route} from 'react-router-dom'\nimport Home from './components/Home';\nimport Login from './components/Login';\n// import Register from './components/Register';\nimport ResetPassword from './components/ResetPassword';\nimport VideoChat from './components/VideoChat'\nimport Room from './components/Room'\n\n\n\n\n\n\nReactDOM.render(\n  <Router>\n    \n  \n    <Routes>\n    \n      <Route path =\"/\" element={<Home/>}>\n      </Route>\n      <Route path =\"/login\" element={<Login/>}/>\n      {/* <Route path =\"/register\" element={<Register/>}/> */}\n      <Route path =\"/reset-password\" element={<ResetPassword/>}/>\n      <Route path =\"/video-chat\" element={<VideoChat/>}/>\n      <Route path=\"/room/:roomID\" element = {<Room/>}/>\n    </Routes>\n  </Router> ,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}